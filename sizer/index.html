<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta name="referrer" content="no-referrer">
    <link rel="icon" type="image/png" href="../images/odin-logo.png">
    <meta name="description" content="ODIN Sizer - Azure Local Instance Sizing Tool">
    <meta name="keywords" content="Azure Local, Azure Stack HCI, Cluster Sizing, Capacity Planning, Odin">
    <title>ODIN Sizer - Azure Local Sizing Tool</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <!-- Segoe UI is a Windows system font - no Google Fonts import needed -->
    <link rel="stylesheet" href="sizer.css">
</head>
<body>
    <!-- Tab Navigation (shared component) -->
    <nav class="odin-tab-nav" id="odin-nav" data-active="sizer" data-base="../"></nav>
    <script src="../js/nav.js"></script>

    <main class="container">
        <div class="disclaimer-wrapper">
            <div class="disclaimer-banner">
                <strong>‚ö†Ô∏è Disclaimer:</strong> This tool is provided as-is, without Microsoft support. Odin is an experimental project that accelerates skills and knowledge ramp up for Azure Local, and helps IT architects validate cluster design configurations.
            </div>
        </div>

        <!-- Header -->
        <header>
            <div class="header-title-wrapper">
                <h1 class="header-title">ODIN Sizer for Azure Local</h1>
                <div class="header-logo-wrapper">
                    <img src="../images/odin-logo.png" alt="Odin for Azure Local Logo">
                    <div class="header-version">
                        Version 0.17.55 | <a href="#" onclick="event.preventDefault(); showChangelog();" class="whats-new-link">What's New</a>
                    </div>
                </div>
            </div>
            <p class="header-description">Calculate cluster hardware requirements based on your workload scenarios and their resiliency and capacity requirements. This tool provides example hardware configurations only. Please consult with your preferred hardware OEM partner for detailed guidance and recommendations on their Azure Local solution offerings.</p>

            <!-- Page Statistics -->
            <div id="page-statistics">
                <div class="stats-container">
                    <div class="stat-item">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--accent-blue)" stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                        <span class="stat-label">Visitors:</span>
                        <span id="stat-page-views" class="stat-value">‚Äî</span>
                    </div>
                    <div class="stat-item">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--accent-blue)" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                        </svg>
                        <span class="stat-label">Designs Generated:</span>
                        <span id="stat-design-docs" class="stat-value">‚Äî</span>
                    </div>
                    <div class="stat-item">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--accent-blue)" stroke-width="2">
                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                        </svg>
                        <span class="stat-label">ARM Deployments:</span>
                        <span id="stat-arm-deployments" class="stat-value">‚Äî</span>
                    </div>
                    <div class="stat-item">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--accent-blue)" stroke-width="2">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                            <line x1="8" y1="21" x2="16" y2="21"/>
                            <line x1="12" y1="17" x2="12" y2="21"/>
                        </svg>
                        <span class="stat-label">Sizes Calculated:</span>
                        <span id="stat-sizer-calcs" class="stat-value">‚Äî</span>
                    </div>
                </div>
            </div>
        </header>



        <div class="sizer-layout">
            <!-- Left Panel: Workload Configuration -->
            <div class="config-panel">
                <!-- Workload Scenario - FIRST -->
                <div class="panel-section">
                    <div class="section-header-row">
                        <h2>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                            </svg>
                            Workload Scenario
                        </h2>
                        <div class="section-header-actions">
                            <button class="btn btn-secondary btn-sm" onclick="importSizerJSON()" title="Import configuration from a JSON file">
                                üìÇ Import
                            </button>
                            <button class="btn btn-secondary btn-sm" onclick="exportSizerJSON()" title="Export configuration as a JSON file">
                                üì§ Export
                            </button>
                            <button class="btn btn-secondary btn-sm" onclick="resetScenario()" title="Reset all workloads and settings">
                                üîÑ Reset
                            </button>
                        </div>
                    </div>
                    <!-- Hidden file input for JSON import -->
                    <input type="file" id="sizer-import-file" accept=".json" style="display: none;" onchange="handleSizerFileImport(event)">
                    <p class="section-desc">Add workloads to calculate your Azure Local cluster requirements.</p>
                </div>

                <!-- Workload Type Selector -->
                <div class="workload-types">
                    <button class="workload-type-btn" onclick="showAddWorkloadModal('vm')">
                        <span class="workload-icon vm">
                            <img src="../images/vm-icon.png" alt="VM" width="28" height="28">
                        </span>
                        <span>Azure Local VMs</span>
                    </button>
                    <button class="workload-type-btn" onclick="showAddWorkloadModal('aks')">
                        <span class="workload-icon aks">
                            <img src="../images/aks-arc-icon.png" alt="AKS Arc" width="28" height="28">
                        </span>
                        <span>AKS Arc Clusters</span>
                    </button>
                    <button class="workload-type-btn" onclick="showAddWorkloadModal('avd')">
                        <span class="workload-icon avd">
                            <img src="../images/avd-icon.png" alt="AVD" width="28" height="28">
                        </span>
                        <span>Azure Virtual Desktop</span>
                    </button>
                </div>

                <!-- Workloads List -->
                <div class="workloads-list" id="workloads-list">
                    <div class="empty-state" id="empty-state">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                            <path d="M12 22V12M3.27 6.96L12 12l8.73-5.04"/>
                        </svg>
                        <p>No workloads added yet</p>
                        <span>Click a workload type above to get started</span>
                    </div>
                </div>

                <!-- Cluster Configuration - FIRST -->
                <div class="panel-section cluster-config">
                    <h2>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M12 1v6M12 17v6M4.22 4.22l4.24 4.24M15.54 15.54l4.24 4.24M1 12h6M17 12h6M4.22 19.78l4.24-4.24M15.54 8.46l4.24-4.24"/>
                        </svg>
                        Recommended Cluster Configuration
                    </h2>
                    <p class="section-desc">Configure your cluster topology and storage settings.</p>

                    <div class="config-info config-info-subtle" id="hadr-tip">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4M12 8h.01"/>
                        </svg>
                        <span>Tip: For business or mission-critical workloads, it is recommended to implement two separate Azure Local clusters, to enable workload HA/DR capabilities between two locations, or consider a Rack-Aware Cluster configuration type.</span>
                    </div>

                    <div class="config-row cluster-setting">
                        <label for="cluster-type">Deployment Type</label>
                        <select id="cluster-type" onchange="onClusterTypeChange()">
                            <option value="single">Single Node</option>
                            <option value="standard" selected>Standard Cluster</option>
                            <option value="rack-aware">Rack-Aware Cluster</option>
                            <option value="aldo-mgmt">ALDO Management Cluster</option>
                            <option value="aldo-wl">ALDO Workload Cluster</option>
                        </select>
                    </div>
                    <div class="config-row cluster-setting">
                        <label for="node-count">Number of Physical Nodes</label>
                        <select id="node-count" onchange="onNodeCountChange()">
                            <option value="2" selected>2 Nodes</option>
                            <option value="3">3 Nodes</option>
                            <option value="4">4 Nodes</option>
                            <option value="5">5 Nodes</option>
                            <option value="6">6 Nodes</option>
                            <option value="7">7 Nodes</option>
                            <option value="8">8 Nodes</option>
                            <option value="12">12 Nodes</option>
                            <option value="16">16 Nodes</option>
                        </select>
                    </div>
                    <div class="config-info" id="node-recommendation" style="display: none;">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4M12 8h.01"/>
                        </svg>
                        <span id="node-recommendation-text"></span>
                    </div>
                    <div class="config-row">
                        <label for="future-growth">Allow for Future Growth</label>
                        <select id="future-growth" onchange="onHardwareConfigChange()">
                            <option value="0" selected>No additional growth</option>
                            <option value="10">10% growth buffer</option>
                            <option value="20">20% growth buffer</option>
                            <option value="30">30% growth buffer</option>
                            <option value="50">50% growth buffer</option>
                        </select>
                    </div>
                    <div class="config-row">
                        <label for="resiliency">Storage Resiliency</label>
                        <select id="resiliency" onchange="onResiliencyChange()">
                            <option value="2way" selected>Two-way Mirror (min 2 nodes)</option>
                            <option value="3way">Three-way Mirror (min 3 nodes)</option>
                        </select>
                    </div>
                    <div class="config-info config-info-warning" id="resiliency-recommendation" style="display: none;">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4M12 8h.01"/>
                        </svg>
                        <span id="resiliency-recommendation-text">We highly recommend using Three-way Mirror for the highest level of resiliency and performance.</span>
                    </div>
                    <div class="config-info config-info-warning" id="cluster-info" style="display: none;">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4M12 8h.01"/>
                        </svg>
                        <span id="cluster-info-text"></span>
                    </div>
                    <div class="config-info config-info-subtle" id="node-n1-tip">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4M12 8h.01"/>
                        </svg>
                        <span id="node-n1-tip-text">Tip: Minimum N+1 capacity must be reserved for Compute and Memory when applying updates (ability to drain a node). Single Node clusters will always incur workload downtime during updates.</span>
                    </div>
                </div>

                <!-- Physical Node(s) - Example Hardware Configuration -->
                <div class="panel-section hardware-config">
                    <h2>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="2" width="20" height="8" rx="2" ry="2"/>
                            <rect x="2" y="14" width="20" height="8" rx="2" ry="2"/>
                            <line x1="6" y1="6" x2="6.01" y2="6"/>
                            <line x1="6" y1="18" x2="6.01" y2="18"/>
                        </svg>
                        Physical Node(s) - Example Hardware Configuration
                    </h2>
                    <p class="section-desc">Define the physical hardware specifications for each node.</p>

                    <!-- CPU Configuration -->
                    <h3 class="hw-subsection-title">CPU Configuration</h3>
                    <div class="config-row">
                        <label for="cpu-manufacturer">CPU Manufacturer</label>
                        <select id="cpu-manufacturer" onchange="onCpuManufacturerChange()">
                            <option value="" disabled>-- Select --</option>
                            <option value="intel" selected>Intel</option>
                            <option value="amd">AMD</option>
                            <option value="intel_edge">Intel (Edge)</option>
                        </select>
                    </div>
                    <div class="config-row">
                        <label for="cpu-generation">CPU Generation</label>
                        <select id="cpu-generation" onchange="onCpuGenerationChange()">
                        </select>
                    </div>
                    <div class="config-row">
                        <label for="cpu-cores">CPU Cores per Socket</label>
                        <select id="cpu-cores" onchange="onCpuConfigChange()">
                        </select>
                    </div>
                    <div class="config-row">
                        <label for="cpu-sockets">CPU Sockets</label>
                        <select id="cpu-sockets" onchange="onCpuConfigChange()">
                            <option value="1">1</option>
                            <option value="2" selected>2</option>
                        </select>
                    </div>

                    <!-- Memory Configuration -->
                    <h3 class="hw-subsection-title">Memory Configuration</h3>
                    <div class="config-row">
                        <label for="node-memory">Memory per Node</label>
                        <select id="node-memory" onchange="onMemoryChange()">
                            <option value="64">64 GB</option>
                            <option value="128">128 GB</option>
                            <option value="192">192 GB</option>
                            <option value="256">256 GB</option>
                            <option value="384">384 GB</option>
                            <option value="512" selected>512 GB</option>
                            <option value="768">768 GB</option>
                            <option value="1024">1024 GB</option>
                            <option value="1536">1536 GB</option>
                            <option value="2048">2048 GB</option>
                            <option value="3072">3072 GB</option>
                            <option value="4096">4096 GB</option>
                        </select>
                    </div>

                    <!-- GPU Configuration -->
                    <h3 class="hw-subsection-title">GPU Configuration</h3>
                    <div class="config-row">
                        <label for="gpu-count">GPUs per Node</label>
                        <select id="gpu-count" onchange="onHardwareConfigChange()">
                            <option value="0" selected>None</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                        </select>
                    </div>
                    <div class="config-row" id="gpu-type-row" style="display: none;">
                        <label for="gpu-type">GPU Type</label>
                        <select id="gpu-type" onchange="onHardwareConfigChange()">
                            <option value="a2" selected>NVIDIA A2 (16 GB VRAM, 60W TDP)</option>
                            <option value="a16">NVIDIA A16 (64 GB VRAM, 250W TDP)</option>
                            <option value="l4">NVIDIA L4 (24 GB VRAM, 72W TDP)</option>
                            <option value="l40">NVIDIA L40 (48 GB VRAM, 300W TDP)</option>
                            <option value="l40s">NVIDIA L40S (48 GB VRAM, 350W TDP)</option>
                        </select>
                    </div>

                    <!-- Advanced Settings -->
                    <h3 class="hw-subsection-title">Advanced Settings</h3>
                    <div class="config-row">
                        <label for="vcpu-ratio">vCPU Overcommit Ratio</label>
                        <select id="vcpu-ratio" onchange="onVcpuRatioChange()">
                            <option value="1">1:1 (No overcommit)</option>
                            <option value="2">2:1</option>
                            <option value="4" selected>4:1 (Default)</option>
                            <option value="5">5:1</option>
                            <option value="6">6:1</option>
                        </select>
                    </div>

                    <!-- Storage Configuration -->
                    <h3 class="hw-subsection-title">Storage Configuration</h3>
                    <div class="config-row">
                        <label for="storage-config">Storage Configuration</label>
                        <select id="storage-config" onchange="onStorageConfigChange()">
                            <option value="all-flash" selected>All-Flash (recommended)</option>
                            <option value="mixed-flash">Mixed All-Flash (NVMe + SSD)</option>
                            <option value="hybrid">Hybrid (SSD/NVMe + HDD)</option>
                        </select>
                    </div>
                    <div class="config-info config-info-warning" id="hybrid-storage-warning" style="display: none;">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4M12 8h.01"/>
                        </svg>
                        <span>All-Flash configuration is recommended for increased performance and resiliency.</span>
                    </div>
                    <div class="config-row">
                        <label for="storage-tiering">Storage Tiering</label>
                        <select id="storage-tiering" onchange="onStorageTieringChange()">
                            <option value="nvme-capacity">No cache - All NVMe as capacity</option>
                            <option value="ssd-capacity" selected>No cache - All SSD as capacity</option>
                        </select>
                    </div>

                    <!-- Disk Configuration (dynamic) -->
                    <div id="disk-config-container">
                        <!-- Single-tier disk config (for All-Flash) -->
                        <div id="single-tier-disks">
                            <h3 class="hw-subsection-title">Disk Configuration (Capacity)</h3>
                            <div class="config-row">
                                <label for="capacity-disk-count">Capacity Disks per Node</label>
                                <select id="capacity-disk-count" onchange="onDiskCountChange()">
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4" selected>4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                    <option value="13">13</option>
                                    <option value="14">14</option>
                                    <option value="15">15</option>
                                    <option value="16">16</option>
                                    <option value="17">17</option>
                                    <option value="18">18</option>
                                    <option value="19">19</option>
                                    <option value="20">20</option>
                                    <option value="21">21</option>
                                    <option value="22">22</option>
                                    <option value="23">23</option>
                                    <option value="24">24</option>
                                </select>
                            </div>
                            <div class="config-row">
                                <label for="capacity-disk-size">Capacity per Disk</label>
                                <select id="capacity-disk-size" onchange="onDiskSizeChange()">
                                    <option value="0.96">960 GB (0.96 TB)</option>
                                    <option value="1.92">1.92 TB</option>
                                    <option value="3.84" selected>3.84 TB</option>
                                    <option value="7.68">7.68 TB</option>
                                    <option value="15.36">15.36 TB</option>
                                </select>
                            </div>

                            <h3 class="hw-subsection-title">S2D Repair Reservation</h3>
                            <div class="config-row">
                                <label for="repair-disk-count">Capacity Disks Reserved for Repair</label>
                                <select id="repair-disk-count" onchange="onRepairDiskCountChange()">
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2" selected>2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                </select>
                            </div>
                        </div>

                        <!-- Two-tier disk config (for Mixed/Hybrid) -->
                        <div id="two-tier-disks" style="display: none;">
                            <h3 class="hw-subsection-title">Cache Disks</h3>
                            <div class="config-row">
                                <label for="cache-disk-count">Cache Disks per Node</label>
                                <select id="cache-disk-count" onchange="onHardwareConfigChange()">
                                    <option value="2" selected>2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>

                                </select>
                            </div>
                            <div class="config-row">
                                <label for="cache-disk-size">Capacity per Cache Disk</label>
                                <select id="cache-disk-size" onchange="onHardwareConfigChange()">
                                    <option value="0.96">960 GB (0.96 TB)</option>
                                    <option value="1.92" selected>1.92 TB</option>
                                    <option value="3.84">3.84 TB</option>
                                    <option value="7.68">7.68 TB</option>
                                    <option value="15.36">15.36 TB</option>
                                </select>
                            </div>
                            <div class="config-info disk-type-info" id="cache-disk-type-info">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M12 16v-4M12 8h.01"/>
                                </svg>
                                <span>Cache disk type: <strong id="cache-disk-type-label">NVMe</strong></span>
                            </div>

                            <h3 class="hw-subsection-title">Capacity Disks</h3>
                            <div class="config-row">
                                <label for="tiered-capacity-disk-count">Capacity Disks per Node</label>
                                <select id="tiered-capacity-disk-count" onchange="onDiskCountChange()">
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4" selected>4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                    <option value="13">13</option>
                                    <option value="14">14</option>
                                    <option value="15">15</option>
                                    <option value="16">16</option>
                                </select>
                            </div>
                            <div class="config-row">
                                <label for="tiered-capacity-disk-size">Capacity per Disk</label>
                                <select id="tiered-capacity-disk-size" onchange="onDiskSizeChange()">
                                    <option value="0.96">960 GB (0.96 TB)</option>
                                    <option value="1.92">1.92 TB</option>
                                    <option value="3.84" selected>3.84 TB</option>
                                    <option value="7.68">7.68 TB</option>
                                    <option value="15.36">15.36 TB</option>
                                </select>
                            </div>
                            <div class="config-info disk-type-info" id="tiered-capacity-disk-type-info">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M12 16v-4M12 8h.01"/>
                                </svg>
                                <span>Capacity disk type: <strong id="capacity-disk-type-label">SSD</strong></span>
                            </div>
                            <h3 class="hw-subsection-title">S2D Repair Reservation</h3>
                            <div class="config-row">
                                <label for="tiered-repair-disk-count">Capacity Disks Reserved for Repair</label>
                                <select id="tiered-repair-disk-count" onchange="onRepairDiskCountChange()">
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2" selected>2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Remove Manual Overrides button (hidden by default) -->
                    <div id="clear-manual-overrides" class="clear-manual-overrides" style="display: none;">
                        <button class="btn btn-clear-manual" onclick="clearAllManualOverrides()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"/>
                                <line x1="6" y1="6" x2="18" y2="18"/>
                            </svg>
                            Remove MANUAL overrides
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Results -->
            <div class="results-panel">
                <div class="panel-section">
                    <h2>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 3v18h18"/>
                            <path d="M18 17V9"/>
                            <path d="M13 17V5"/>
                            <path d="M8 17v-3"/>
                        </svg>
                        Requirements Summary
                    </h2>
                </div>

                <!-- Configure in Designer -->
                <div class="designer-action" id="designer-action" style="display: none;">
                    <button class="btn btn-designer" onclick="configureInDesigner()">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 20h9"/>
                            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                        </svg>
                        Configure in Designer
                    </button>
                    <p class="designer-action-desc">Continue to add additional workloads, if required. Once complete, open the Designer wizard pre-configured with this cluster and hardware sizer settings.</p>
                </div>

                <!-- Total Requirements -->
                <div class="requirements-grid">
                    <div class="requirement-card">
                        <div class="req-icon cpu">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="4" y="4" width="16" height="16" rx="2"/>
                                <rect x="9" y="9" width="6" height="6"/>
                                <path d="M9 1v3M15 1v3M9 20v3M15 20v3M20 9h3M20 14h3M1 9h3M1 14h3"/>
                            </svg>
                        </div>
                        <div class="req-content">
                            <span class="req-label">Total vCPUs</span>
                            <span class="req-value" id="total-vcpus">0</span>
                        </div>
                    </div>
                    <div class="requirement-card">
                        <div class="req-icon memory">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M6 19v-3M10 19v-3M14 19v-3M18 19v-3M6 8V5M10 8V5M14 8V5M18 8V5"/>
                                <rect x="3" y="8" width="18" height="8" rx="1"/>
                            </svg>
                        </div>
                        <div class="req-content">
                            <span class="req-label">Total Memory</span>
                            <span class="req-value" id="total-memory">0 GB</span>
                        </div>
                    </div>
                    <div class="requirement-card">
                        <div class="req-icon storage">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <ellipse cx="12" cy="5" rx="9" ry="3"/>
                                <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/>
                                <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/>
                            </svg>
                        </div>
                        <div class="req-content">
                            <span class="req-label">Total Storage</span>
                            <span class="req-value" id="total-storage">0 TB</span>
                        </div>
                    </div>
                    <div class="requirement-card">
                        <div class="req-icon workloads">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                            </svg>
                        </div>
                        <div class="req-content">
                            <span class="req-label">Total Workloads</span>
                            <span class="req-value" id="total-workloads">0</span>
                        </div>
                    </div>
                </div>

                <!-- Per-Node Requirements -->
                <div class="per-node-section">
                    <h3>Workload Per-Node Requirements (with N+1)</h3>
                    <div class="per-node-grid">
                        <div class="per-node-item">
                            <span class="label">Physical Cores</span>
                            <span class="value" id="per-node-cores">0</span>
                        </div>
                        <div class="per-node-item">
                            <span class="label">Memory</span>
                            <span class="value" id="per-node-memory">0 GB</span>
                        </div>
                        <div class="per-node-item">
                            <span class="label">Raw Storage</span>
                            <span class="value" id="per-node-storage">0 TB</span>
                        </div>
                        <div class="per-node-item">
                            <span class="label">Usable Storage</span>
                            <span class="value" id="per-node-usable">0 TB</span>
                        </div>
                    </div>
                </div>

                <!-- Capacity Usage for Workload -->
                <div class="capacity-breakdown">
                    <h3>Capacity Usage for Workload</h3>
                    <div class="breakdown-bars">
                        <div class="breakdown-item">
                            <div class="breakdown-header">
                                <span>Azure Local hyperconverged instance size</span>
                                <span id="nodes-count-label">0 / 16</span>
                            </div>
                            <div class="breakdown-bar">
                                <div class="breakdown-fill nodes" id="nodes-fill" style="width: 0%"></div>
                            </div>
                            <div class="breakdown-legend">
                                (includes N+1 node count, for servicing and redundancy)
                            </div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-header">
                                <span>Compute (vCPUs) - Consumed</span>
                                <span id="compute-percent">0%</span>
                            </div>
                            <div class="breakdown-bar">
                                <div class="breakdown-fill compute" id="compute-fill" style="width: 0%"></div>
                            </div>
                            <div class="breakdown-legend">
                                <span id="compute-used">0</span> / <span id="compute-total">0</span> vCPUs
                            </div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-header">
                                <span>Memory - Consumed</span>
                                <span id="memory-percent">0%</span>
                            </div>
                            <div class="breakdown-bar">
                                <div class="breakdown-fill memory" id="memory-fill" style="width: 0%"></div>
                            </div>
                            <div class="breakdown-legend">
                                <span id="memory-used">0</span> / <span id="memory-total">0</span> GB
                            </div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-header">
                                <span>Usable Storage - Consumed</span>
                                <span id="storage-percent">0%</span>
                            </div>
                            <div class="breakdown-bar">
                                <div class="breakdown-fill storage" id="storage-fill" style="width: 0%"></div>
                            </div>
                            <div class="breakdown-legend">
                                <span id="storage-used">0</span> / <span id="storage-total">0</span> TB
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Capacity Utilization Warning -->
                <div class="config-info config-info-warning" id="capacity-utilization-warning" style="display: none;">
                    <span class="info-icon">üö´</span>
                    <span>One or more resources (Compute, Memory, or Storage) are at or above 90% utilization. This is not a recommended configuration ‚Äî increase per-node hardware specs, add more nodes, or reduce workloads before proceeding to the Designer.</span>
                </div>

                <!-- Manual Override Capacity Warning -->
                <div class="config-info config-info-warning manual-override-warning" id="manual-override-warning" style="display: none;">
                    <span class="info-icon">‚ö†Ô∏è</span>
                    <span id="manual-override-warning-text"></span>
                </div>

                <!-- Storage Limit Exceeded Warning -->
                <div class="config-info config-info-warning" id="storage-limit-warning" style="display: none;">
                    <span class="info-icon">üö´</span>
                    <span id="storage-limit-warning-text">Storage configuration exceeds Azure Local supported limits. Export is blocked until the configuration is corrected.</span>
                </div>

                <!-- Power & Rack Estimate -->
                <div class="power-rack-estimate" id="power-rack-section" style="display: none;">
                    <h3>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                        </svg>
                        Estimated Power, Heat &amp; Rack Space
                    </h3>
                    <div class="power-rack-grid">
                        <div class="power-rack-item">
                            <span class="label">Per-Node Power (est.)</span>
                            <span class="value" id="power-per-node">‚Äî</span>
                        </div>
                        <div class="power-rack-item">
                            <span class="label">Total Cluster Power (est.)</span>
                            <span class="value" id="power-total">‚Äî</span>
                        </div>
                        <div class="power-rack-item">
                            <span class="label">Total <a href="https://en.wikipedia.org/wiki/British_thermal_unit" target="_blank" rel="noopener noreferrer">BTU</a>/hr (est.)</span>
                            <span class="value" id="power-btu">‚Äî</span>
                        </div>
                        <div class="power-rack-item">
                            <span class="label">Rack Units (est., incl. 2√ó ToR switches)</span>
                            <span class="value" id="rack-units">‚Äî</span>
                        </div>
                    </div>
                    <div class="config-info" style="margin-top: 8px;">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4M12 8h.01"/>
                        </svg>
                        <span>Estimates based on component TDP ratings. Actual power varies by workload and OEM hardware design. <strong>Consult your preferred OEM hardware partner for accurate power and rack planning.</strong></span>
                    </div>
                </div>

                <!-- Notes -->
                <div class="notes-section">
                    <h3>Azure Local Instance - Sizing Notes</h3>
                    <ul id="sizing-notes">
                        <li>Add workloads to see sizing recommendations</li>
                    </ul>
                </div>

                <!-- Export Actions -->
                <div class="export-actions">
                    <button class="btn btn-secondary" onclick="window.print()" title="Save as PDF via browser print dialog">
                        üíæ Save as PDF
                    </button>
                    <button class="btn btn-secondary" onclick="exportSizerWord()" title="Download as Word document">
                        üìÑ Download Word
                    </button>
                    <button class="btn btn-secondary" onclick="exportSizerJSON()" title="Export configuration as a shareable JSON file">
                        üì§ Export JSON
                    </button>
                    <button class="btn btn-secondary" onclick="importSizerJSON()" title="Import configuration from a JSON file">
                        üìÇ Import JSON
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Add Workload Modal -->
    <div class="modal-overlay" id="modal-overlay" onclick="closeModal()"></div>
    <div class="modal" id="add-workload-modal">
        <div class="modal-header">
            <h3 id="modal-title">Add Workload</h3>
            <button class="modal-close" onclick="closeModal()">&times;</button>
        </div>
        <div class="modal-body" id="modal-body">
            <!-- Content populated by JavaScript -->
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            <button class="btn btn-primary" id="modal-submit-btn" onclick="addWorkload()">Add Workload</button>
        </div>
    </div>

    <!-- Region Picker Modal (shown before navigating to Designer) -->
    <div class="modal-overlay" id="region-modal-overlay" onclick="closeRegionModal()"></div>
    <div class="modal region-picker-modal" id="region-picker-modal">
        <div class="modal-header">
            <h3>Select Azure Region</h3>
            <button class="modal-close" onclick="closeRegionModal()">&times;</button>
        </div>
        <div class="modal-body">
            <p class="region-picker-desc">Choose the Azure region for your Azure Local deployment. This will be set in the Designer wizard.</p>
            <div class="region-picker-cloud">
                <label class="region-cloud-label">
                    <input type="radio" name="region-cloud" value="azure_commercial" checked onchange="updateRegionOptions()">
                    Azure Commercial
                </label>
                <label class="region-cloud-label">
                    <input type="radio" name="region-cloud" value="azure_government" onchange="updateRegionOptions()">
                    Azure Government
                </label>
            </div>
            <div class="region-grid" id="region-grid">
                <button class="region-btn" data-region="east_us" data-cloud="azure_commercial" onclick="selectRegionAndConfigure('east_us', 'azure_commercial')">East US</button>
                <button class="region-btn" data-region="west_europe" data-cloud="azure_commercial" onclick="selectRegionAndConfigure('west_europe', 'azure_commercial')">West Europe</button>
                <button class="region-btn" data-region="australia_east" data-cloud="azure_commercial" onclick="selectRegionAndConfigure('australia_east', 'azure_commercial')">Australia East</button>
                <button class="region-btn" data-region="canada_central" data-cloud="azure_commercial" onclick="selectRegionAndConfigure('canada_central', 'azure_commercial')">Canada Central</button>
                <button class="region-btn" data-region="india_central" data-cloud="azure_commercial" onclick="selectRegionAndConfigure('india_central', 'azure_commercial')">India Central</button>
                <button class="region-btn" data-region="japan_east" data-cloud="azure_commercial" onclick="selectRegionAndConfigure('japan_east', 'azure_commercial')">Japan East</button>
                <button class="region-btn" data-region="south_central_us" data-cloud="azure_commercial" onclick="selectRegionAndConfigure('south_central_us', 'azure_commercial')">South Central US</button>
                <button class="region-btn" data-region="southeast_asia" data-cloud="azure_commercial" onclick="selectRegionAndConfigure('southeast_asia', 'azure_commercial')">Southeast Asia</button>
                <button class="region-btn" data-region="us_gov_virginia" data-cloud="azure_government" onclick="selectRegionAndConfigure('us_gov_virginia', 'azure_government')">US Gov Virginia</button>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeRegionModal()">Cancel</button>
        </div>
    </div>

    <!-- ALDO FQDN Modal (shown before region picker for ALDO Management Cluster) -->
    <div class="modal-overlay" id="aldo-fqdn-modal-overlay" onclick="closeAldoFqdnModal()"></div>
    <div class="modal region-picker-modal" id="aldo-fqdn-modal">
        <div class="modal-header">
            <h3>Autonomous Cloud Endpoint</h3>
            <button class="modal-close" onclick="closeAldoFqdnModal()">&times;</button>
        </div>
        <div class="modal-body">
            <p class="region-picker-desc">Enter the Autonomous Cloud FQDN for the ALDO management cluster. This endpoint is used by disconnected operations for the local Azure control plane.</p>
            <div style="margin: 16px 0;">
                <label for="aldo-fqdn-input" style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-primary, #e0e7ff);">Autonomous Cloud FQDN</label>
                <input type="text" id="aldo-fqdn-input" placeholder="e.g. mgmt.contoso.com" oninput="validateAldoFqdn()" style="width: 100%; padding: 10px 14px; border: 1px solid var(--glass-border, #2d3653); border-radius: 8px; background: var(--input-bg, #0d1117); color: var(--text-primary, #e0e7ff); font-size: 14px; box-sizing: border-box;">
                <div id="aldo-fqdn-error" style="display: none; color: #ef4444; font-size: 12px; margin-top: 6px;"></div>
                <div id="aldo-fqdn-success" style="display: none; color: #10b981; font-size: 12px; margin-top: 6px;">&#10003; Valid FQDN format</div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeAldoFqdnModal()">Cancel</button>
            <button class="btn btn-primary" id="aldo-fqdn-confirm-btn" disabled onclick="confirmAldoFqdnAndConfigure()">Continue to Region Selection</button>
        </div>
    </div>

    <!-- Analytics -->
    <script src="../js/utils.js"></script>
    <script src="../js/analytics.js"></script>
    <script src="../js/changelog.js"></script>
    <script src="sizer.js"></script>
    <footer style="text-align:center;padding:2rem 1rem 1rem;font-size:0.85rem;color:#aaa;">
        üîí Privacy: The data shown in this report is stored locally in your web browser. No data or template input values are transmitted externally.
    </footer>
</body>
</html>
